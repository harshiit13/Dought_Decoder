<%- include('../Partial/head.ejs') %>
  <%- include('../Partial/header.ejs') %>
    <div class="body-wrapper">
      <div class="container-fluid" style="padding-top: 150px !important;">
        <div class="card card-body" style="padding-top: 20px !important;">

   



          <div class="d-flex align-items-center justify-content-center mb-2">
            <div class="d-flex align-items-center justify-content-center rounded-circle" style="width: 110px; height: 110px;" ;="">
              <div class="border border-4 border-white d-flex align-items-center justify-content-center rounded-circle overflow-hidden" style="width: 100px; height: 100px;" ;="">
                
             
                <img src="../../uploads/Teacher/<%= data[0].TeacherPhoto %>"  class="rounded-circle" width="80" height="80">

              </div>
            </div>
          </div>


          
            
            <div class="px-4 py-3 border-bottom">
                <h5 class="card-title fw-semibold mb-0">Update A Teacher</h5>
              </div>
          <form id="updateform"  enctype="multipart/form-data" class="form mt-3" method="post" action="/Teacher/setTeacher">
            <!-- <input class="form-control" name="UserName" value="<%= name %>" type="text" placeholder="Readonly input here…" readonly="">
                        <input class="form-control" name="TeacherID" value="<%= id %>" type="text" placeholder="Readonly input here…" readonly="">
                         -->
            <div class="row">

                <input type="hidden" name="TeacherID" value="<%=data[0].TeacherID%>"class="form-control">
                <input type="hidden" name="AdminID" value="<%= data[0].AdminID %>"class="form-control">

              <div class="form-group col-md-3">
                <label for="inputState">Department<span class="text-danger ml-1">*</span></label>
                <select required name="DepartmentID" id="DepartmentID" class="form-control">
                  <option selected value=" <%= data[0].DepartmentID %> "><%= data[0].DepartmentName %></option>
                  <% for (d of data3){ %>
                    <option value="<%= d.DepartmentID %>">
                      <%= d.DepartmentName %>
                    </option>
                    <% } %>
                </select>
                <span id="de" class="text-danger ml-1"></span>
              </div>


              <div class="form-group col-md-3">
                <label for="Name">Name<span class="text-danger ml-1">*</span></label>
                <input required value="<%= data[0].Name %>" type="text" class="form-control" name="Name" id="Name" placeholder="Name">
                <span id="ne" class="text-danger ml-1"></span></div>



              <div class="form-group col-md-3">
                <label for="inputEmail4">Mobile Number<span class="text-danger ml-1">*</span></label>
                <input required value="<%=data[0].Mobile %>" name="Mobile" type="number" class="form-control" id="Mobile" placeholder="10-Digits">
                <span id="me" class="text-danger ml-1"></span> </div>



              <div class="form-group col-md-3">
                <label for="UseName">UserName<span class="text-danger ml-1">*</span></label>
                <input required value="<%=data[0].UserName %>" name="UserName" type="text" class="form-control" id="UserName" placeholder="UserName">
                <span id="ue" class="text-danger ml-1"></span>  </div>



            </div>


            <div class="row mt-5">

              <div class="form-group col-md-3">
                <label for="inputEmail4">Password<span class="text-danger ml-1">*</span></label>
                <input required value="<%=data[0].Password %>" name="Password" type="password" class="form-control" id="Passwod" placeholder="Password">
                <span id="pe" class="text-danger ml-1"></span> </div>

              <div class="form-group col-md-3">
                <label for="inputEmail4">Email</label>
                <input value="<%=data[0].EmailID %>" name="EmailID" type="text" class="form-control" id="EmailID" placeholder="Email">
                <span id="ee" class="text-danger ml-1"></span></div>


              <div class="form-group col-md-3">
                <label for="inputEmail4">Teacher Photo</label>
                <input name="TeacherPhoto" type="file" class="form-control" id="TeachePhoto" placeholder="Email">
               <input type="hidden" name="TeacherPhoto" value="<%=data[0].TeacherPhoto %>">
              </div>



              <div class="form-group col-md-3">
                <label for="inputEmail4">Addrress</label>
                <input name="Address" value="<%=data[0].Address %>" type="text" class="form-control" id="Address" placeholder="Email">
              </div>


            </div>


            <div class="row">

              <div class="col-md-3"></div>
              <div class="col-md-3"></div>
              <div class="col-md-3"></div>
              <div class="col-md-3">
                <button onclick="validateEmail()" type="submit" class="mt-3 btn justify-content-end btn-success rounded-pill px-4">
                  <div class="d-flex align-items-center">
                    <i class="ti ti-device-floppy me-1 fs-4"></i>
                    Save
                  </div>
                </button>

                <button onclick="cancle()" type="button" class="mt-3 btn justify-content-end btn-danger rounded-pill px-4">
                  <div class="d-flex align-items-center">
                    Cancle
                  </div>
                </button>
              </div>

          </div>
        </div>






        </form>




      </div>
    </div>


    <script>

$("#updatefrom").validate({
                    debug: false,
                    errorElement: 'span',
                    invalidHandler: function (event, validator) {
                        //debugger;
                        if (validator.numberOfInvalids() > 0) {
                            event.preventDefault();
                        }
                    },
                    onkeyup: false,
                    messages: {
                        DepatmentID: {
                            required: "Please Enter Depatment"
                        },
                        Name: {
                            required: "Please Enter  Name"
                        },

                        Mobile: {
                            required: "Pease Enter Mobile No."
                        },

                        UserName: {
                            required: "Please Enter UserNmae"
                        },
                        Password: {
                            required: "Please Enter Passwod"
                        }
                    },
                    rules: {
                        Name: {
                            required: true,
                        },
                        UserName: {
                            required: true,
                        },
                        Mobile: {
                            // required: true,
                            minlength: 17,
                            maxlength: 17
                        },
                        Password: {
                            required: true,
                        }

                       
                    },

                    submitHandler: function (form, event) {
                        event.preventDefault();
                    }
                });



function validateEmail() {

const EmailID = document.getElementsByName('EmailID').value;
const DepartmentID = document.getElementsByName('DepartmentID').value;
const Name = document.getElementsByName('Name').value;
const Mobile = document.getElementsByName('Mobile').value;
const UserName = document.getElementById('UserName').value;
const Passwod = document.getElementById('Password').value
const ee = document.getElementById('ee');
const pe = document.getElementById('pe');
const de = document.getElementById('de');
const ne = document.getElementById('ne');
const ue = document.getElementById('ue');
// Regular expression for a simple email validation
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;



if (EmailID == undefined) {
  ee.innerText = "Invalid Email"
  event.preventDefault();
}
if (DepartmentID == undefined) {
  de.innerText = "Invalid DepartmentID"
  event.preventDefault();
}
if (Name == undefined) {
  ne.innerText = "Invalid Name"
  event.preventDefault();
}
if (Mobile == undefined) {
  me.innerText = "Invalid Mobile"
  event.preventDefault();
}
if (UserName == undefined) {
  ue.innerText = "Invalid Username"
  event.preventDefault();
}
if (Password == undefined) {
  pe.innerText = "Invalid Password"
  event.preventDefault();
}
}


      function cancle(){
        window.location.href="/viewTeacher"

      }
    </script>
    <%- include('../Partial/footer.ejs') %>